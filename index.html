<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Keuangan</title>
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="common.css" />
    <link rel="stylesheet" href="dashboard.css" />
  </head>
  <body>
    <!-- Header Bar -->
    <div class="header-bar">
      <div class="brand-container">
        <div class="hamburger-menu" id="hamburger-menu">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="brand-logo">C</div>
        <div class="brand-name">Cash Budget</div>
      </div>

      <div class="header-actions">
        <button id="theme-toggle" class="theme-toggle-button" aria-label="Toggle light and dark theme">üí°</button>
        <div>üîî</div>

        <div class="user-profile">
          <div class="user-avatar">LCF</div>
          <div>Fallen</div>
        </div>
      </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <a class="nav-item" href="index.html">
        <div class="nav-icon">üí∞</div>
        <div class="nav-label">Dashboard</div>
      </a>
      <a class="nav-item active" href="detailed.html">
        <div class="nav-icon">üìã</div>
        <div class="nav-label">Detailed</div>
      </a>
      <a class="nav-item" href="debts.html">
        <div class="nav-icon">üòà</div>
        <div class="nav-label">Debts</div>
      </a>
      <a class="nav-item" href="budget_tools.html">
        <div class="nav-icon">üõ†Ô∏è</div>
        <div class="nav-label">Budget Tools</div>
      </a>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Dashboard Header -->
      <div class="dashboard-header">
        <div>
          <h1 class="dashboard-title">Budget Analytics</h1>
          <p class="dashboard-subtitle">
            Track your budget performance and sales metrics
          </p>
        </div>

        <div style="display: flex">
          <!-- Tambahkan dropdown filter bulan baru -->
          <div class="filter-group" style="display: flex; align-items: center;">
             <label for="annual-month-filter" style="margin-right: 10px; color: #1a2542; font-weight: 600;">Bulan:</label>
             <select id="annual-month-filter" style="padding: 8px 12px; border-radius: 8px; border: 1px solid #e0e6f6; background-color: #f6f8ff; color: #1a2542; font-size: 14px; cursor: pointer;">
                <option value="All">Semua</option>
                <option value="Januari">Januari</option>
                <option value="Februari">Februari</option>
                <option value="Maret">Maret</option>
                <option value="April">April</option>
                <option value="Mei">Mei</option>
                <option value="Juni">Juni</option>
                <option value="Juli">Juli</option>
                <option value="Agustus">Agustus</option>
                <option value="September">September</option>
                <option value="Oktober">Oktober</option>
                <option value="November">November</option>
                <option value="Desember">Desember</option>
             </select>
          </div>

        </div>
      </div>

      <!-- Dashboard Grid -->
      <div class="dashboard-grid">
        <!-- Quick Stats -->
        <div class="quick-stats">
          <div class="stat-card">
            <div class="stat-icon blue-gradient">üíµ</div>
            <div class="stat-title">Total Savings</div>
            <div class="stat-value" id="total-savings-value">175</div>
            <div class="stat-badge badge-blue" id="savings-percentage">+30 New Additions</div>
          </div>

          <div class="stat-card">
            <div class="stat-icon purple-gradient">üìà</div>
            <div class="stat-title">Total Income</div>
            <div class="stat-value" id="total-income-value">12,500</div>
            <!-- <div class="stat-badge badge-purple">75% Completed</div> -->
          </div>

          <div class="stat-card">
            <div class="stat-icon green-gradient">üìâ</div>
            <div class="stat-title">Total Expenses</div>
            <div class="stat-value" id="total-expenses-value">$3,250.00</div>
            <!-- <div class="stat-badge badge-green">+82% vs Last Month</div> -->
          </div>

          <div class="stat-card">
            <div class="stat-icon orange-gradient">‚öñÔ∏è</div>
            <div class="stat-title">Balance</div>
            <div class="stat-value" id="balance-value">$42,500</div>
            <div class="stat-badge badge-orange" id="balance-growth-rate">+5.2% Growth Rate</div>
          </div>
        </div>

        <!-- Revenue Chart -->
        <div class="revenue-chart-container">
          <div class="chart-header">
            <div class="chart-title">Cash Flow</div>
            <div class="period-tabs">
              <div class="period-tab">Daily</div>
              <div class="period-tab">Weekly</div>
              <div class="period-tab active">Monthly</div>
              <div class="period-tab">Yearly</div>
            </div>
          </div>

          <div class="revenue-chart">
            <canvas id="cashFlowChart"></canvas>
          </div>

          <div class="chart-legend">
            <div class="legend-item">
              <div class="legend-color" style="background-color: #9370db"></div>
              <div id="income-legend">Income: $10,625 (25%)</div>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background-color: #43a047"></div>
              <div id="expenses-legend">Expenses: $12,750 (30%)</div>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background-color: #4169e1"></div>
              <div id="savings-legend">Savings: $8,500 (20%)</div>
            </div>
          </div>
        </div>

        <!-- New Card: Expense Distribution by Category -->
        <div class="revenue-chart-container" style="grid-column: span 4;">
            <div class="chart-header">
                <div class="chart-title">Distribusi Pengeluaran per Kategori</div>
            </div>
            <div class="revenue-chart">
                <canvas id="expenseDistributionChart"></canvas>
            </div>
            <div class="chart-legend" id="expense-distribution-legend">
                <!-- Legend will be populated by JavaScript -->
            </div>
        </div>

        <!-- Performance & Goals Section -->
        <div class="performance-container" style="grid-column: span 12;">
            <div class="chart-header">
                <div class="chart-title">Performance & Goals</div>
            </div>
            <div class="goals-grid">
                <!-- Target Budget Progress -->
                <div class="goal-section">
                    <h3>Target Budget Progress</h3>
                    <div id="budget-targets-container">
                        <!-- Budget targets will be populated here -->
                    </div>
                </div>

                <!-- Long Term Goals Progress -->
                <div class="goal-section">
                    <h3>Long Term Goals Progress</h3>
                    <div id="long-term-goals-container">
                        <!-- Long term goals will be populated here -->
                    </div>
                </div>

                <!-- Sinking Fund Progress -->
                <div class="goal-section">
                    <h3>Sinking Fund Progress</h3>
                    <div id="sinking-funds-container">
                        <!-- Sinking funds will be populated here -->
                    </div>
                </div>
            </div>
        </div>

      </div>
    </div>

    <!-- Edit Budget Target Modal (Hidden by default) -->

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <!-- 2. File Konfigurasi Firebase -->
    <script src="config.js"></script>

    <!-- 3. Common Functions -->
    <script src="common.js"></script>

    <!-- 4. Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- 5. Page Specific Script -->
    <script src="index.js"></script>
  </body>
</html>